function performSanityCheck(win)
% Generate a test stimulus to ensure that left and right screens are
% arranged properly (sometimes OSX flips them around)
% Left screen should have ared rectangle;  Right screen a green rectangle

    backgroundColor       = struct;
    backgroundColor.left  = [0 0 0];
    backgroundColor.right = backgroundColor.left;
       
    leftRect.color.left    = [1 0 0];
    leftRect.color.right   = backgroundColor.right;
    leftRect.centerPos     = [-10 0 0];
    leftRect.size          = [3 3];

    rightRect.color.left   = backgroundColor.left;
    rightRect.color.right  = [0 1 0];
    rightRect.centerPos    = [10 0 0];
    rightRect.size         = leftRect.size;

    % add the rectangles to the rendering pipeline
    win.addRectangle(leftRect.centerPos,  leftRect.size,  leftRect.color , 'name', 'LeftRectangle');
    win.addRectangle(rightRect.centerPos, rightRect.size, rightRect.color, 'name', 'RightRectangle');

    % add some text info to each screen for the use
    leftText.centerPos     = [0 5];
    rightText.centerPos    = [0 -5];
    win.addText('Left eye, red square)',   'center', leftText.centerPos, 'name','LeftRectangleText');
    win.addText('Right eye, green square','center', rightText.centerPos, 'name','RightRectangleText');

    % Render the scene
    win.draw;
    % Voice prompt to continue
    Speak('Do the screens look right ? Hit a key to continue.','Victoria');

    key = GetChar;
    % remove previous objects. We do not need them anymore
    win.deleteObject('LeftRectangle');
    win.deleteObject('RightRectangle');
    win.deleteObject('LeftRectangleText');
    win.deleteObject('RightRectangleText');

end % sanityCheck

       